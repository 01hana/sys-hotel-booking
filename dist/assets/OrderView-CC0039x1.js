const __vite__fileDeps=["assets/index-CftgMwAm.js","assets/index-BT5ciucb.js","assets/index-Ufe54TO0.css","assets/index-IpHKjHso.js","assets/vue.runtime.esm-bundler-CZsfuo3g.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{g as w,h as P,m as ee,o as f,d as v,i as n,e as s,t as _,p as T,j as O,a as u,w as h,q as L,s as J,V as A,u as K,v as z,x as te,y as se,z as U,c as R,A as D,B as E,r as M,_ as B,C as Q,D as ae,n as k,E as oe,G as X,k as I,H as W,I as ne,J as j,K as re}from"./index-BT5ciucb.js";import{u as le,a as H}from"./index-IpHKjHso.js";const ie={class:"row justify-content-between flex-column flex-xl-row g-0 gap-2 w-100"},ce={key:0,class:"col-auto heading-elements me-auto hstack"},de={class:"d-flex align-items-center flex-wrap gap-1"},ue=["data-bs-target","textContent"],me={key:0,class:"vr mx-1 my-2 d-none d-sm-block"},be={key:1,class:"col-12 col-md-auto ms-auto"},fe={class:"input-group"},pe={type:"submit",class:"input-group-text btn btn-light bi bi-search",form:"search-form"},he={__name:"DtHeader",props:{actions:Object},emits:["searchSubmit"],setup(l,{emit:e}){const t=l,a=w(null),r=P(()=>({show:t.actions?.create?.show??!0,bsTarget:t.actions?.create?.bsTarget??"#create-edit-modal"})),o=e,i=c=>o("searchSubmit",c),m=c=>o("dtReset",c);return(c,p)=>{const g=ee("tooltip");return f(),v("div",ie,[n(r).show?(f(),v("div",ce,[s("div",de,[s("button",{type:"button",class:"btn btn-primary btn-lg","data-type":"create","data-bs-toggle":"modal","data-bs-target":n(r).bsTarget,textContent:_(c.$t("actions.createText"))},null,8,ue),T(c.$slots,"actions"),c.$slots.actions?(f(),v("div",me)):O("",!0)])])):O("",!0),c.$slots.search?(f(),v("div",be,[u(n(J),{ref_key:"searchForm",ref:a,id:"search-form",class:"position-relative",onSubmit:i},{default:h(()=>[s("div",fe,[T(c.$slots,"search"),L(s("button",pe,null,512),[[g,c.$t("actions.searchText"),void 0,{bottom:!0}]]),L(s("button",{type:"reset",class:"input-group-text btn btn-light bi bi-arrow-clockwise",form:"search-form","data-bs-toggle":"tooltip",onClick:p[0]||(p[0]=y=>m(n(a)))},null,512),[[g,c.$tc("actions.resetText",0),void 0,{bottom:!0}]])])]),_:3},512)])):O("",!0)])}}};class q{static stores;constructor(e){this.stores=e}$resetSelect=()=>{const{table:e}=this.stores;e.select.count=0,e.ref.clearCheckboxRow()};$resetSearch=()=>{const{table:e}=this.stores;Object.hasOwn(e.params,"searches")&&(e.params.searches={})};$resetFilters=()=>{const{table:e}=this.stores;if(!Object.hasOwn(e.params,"filters"))return;e.ref.getCheckedFilters().forEach(a=>e.ref.clearFilter(a.field)),e.params.filters={}};dtClear=()=>{const{table:e}=this.stores;e.ref.clearAll()};$setSort=()=>{const{table:e}=this.stores;let t=e.params.sort[0],a=e.params.sort[1];if(e.ref.getSortColumns().length>0){const{field:r,order:o}=e.ref.getSortColumns()[0];e.ref.sort(r,o);return}Object.hasOwn(e.params,"defaultSort")&&(t=e.params.defaultSort[0],a=e.params.defaultSort[1]),e.ref.sort(t,a)};setTable(e){if(!e)return;const{table:t}=this.stores;t.dtData=e.data,t.params.p=e.p,t.pager.totals=e.totals,this.$setSort()}selectVisible=e=>{const{table:t}=this.stores,a=t.ref.getColumnByField("select");e.value?(t.ref.hideColumn(a),this.$resetSelect()):t.ref.showColumn(a),e.value=!e.value};searchSubmit=e=>{const{table:t,getTable:a}=this.stores;this.$resetSearch(),t.params.p=1,t.params.searches.keyword=e.keyword};dtReset=e=>{const{table:t,getTable:a}=this.stores;this.$resetSearch(),this.$resetFilters(),e.resetForm(),t.params.p=1};sortChange=({column:e,triggerResizable:t,triggerSort:a,triggerFilter:r})=>{if(!e.sortable||t||a||r)return;const{table:o,getTable:i}=this.stores;switch(o.params.sort.length>0&&!Object.hasOwn(o.params,"defaultSort")&&(o.params.defaultSort=[o.params.sort[0],o.params.sort[1]]),e.order){case"desc":e.field===o.params.defaultSort[0]?o.ref.sort(e.field,"asc"):o.ref.clearSort();break;case"asc":o.ref.sort(e.field,"desc");break;default:o.ref.sort(e.field,"asc")}const m=o.ref.getSortColumns().length>0;let c,p;if(!m&&Object.hasOwn(o.params,"defaultSort")&&(c=o.params.defaultSort[0],p=o.params.defaultSort[1]),m){const{field:g,order:y}=o.ref.getSortColumns()[0];c=g,p=y}o.params.sort=[c,p],i()};filterChange=e=>{const{table:t}=this.stores,{getTable:a}=this.stores,{field:r,values:o}=e;t.params.p=1,t.params.filters[r]=o,o.length<=0&&delete t.params.filters[r],a()};selectChange=e=>{const{table:t}=this.stores;t.select.count=e.records.length};pageParams=()=>{const{table:e}=this.stores;e.params.p=e.params.p||A.Pager.props.currentPage.default,e.params.length=e.params.length||A.Pager.props.pageSize.default()};pageChange=e=>{const{table:t}=this.stores,{getTable:a}=this.stores;t.params.p=e.currentPage,t.params.length=e.pageSize,a()};remove=(e,t)=>{const{remove:a}=this.stores;a({rows:[e],name:t,isMultiple:!1})};removeBatch=()=>{const{table:e}=this.stores,{remove:t}=this.stores;if(e.select.count<=0)return;const o={rows:e.ref.getCheckboxRecords().map(i=>i.id),isMultiple:!0};t(o)};actionBatch=(e,t)=>{const{table:a}=this.stores,{actions:r}=this.stores;if(a.select.count<=0)return;const i=a.ref.getCheckboxRecords().map(c=>c.id);r({type:e,value:t,rows:i})}}const ge=[{id:"b4df1a3f-366c-4812-8e5a-86307dc4285a",number:"A00020240810",buyer:{name:"王曉明",tel:"0912345678",email:"wang@gmail.com"},start_date:"2024/08/10",end_date:"2024/08/12",price:2500,memo:null},{id:"d2b96240-a596-47e8-815c-cd7afa197e74",number:"B00020240815",buyer:{name:"林大花",tel:"0900123456",email:"lin123@gmail.com"},start_date:"2024/08/15",end_date:"2024/08/16",price:3900,memo:"含早餐"}];function Z(){const l=K();function e(r,o){return z.global.t(r,o)}function t(r,o){return z.global.tc(r,o)}function a(r,o){const{name:i}=l;return z.global.t(`views.${i}.${r}`,o)}return{$t:e,$tv:a,$tc:t}}const N=te("order",()=>{const{$t:l}=Z(),e=se({dtData:ge,spinner:!1,pager:{totals:2},params:{sort:["sort","asc"],searches:{}}});async function t({rows:r,name:o}){const{default:i,baseSwal:m}=await U(()=>import("./index-CftgMwAm.js"),__vite__mapDeps([0,1,2,3])),c=new i("DEL"),{h:p,render:g}=await U(()=>import("./vue.runtime.esm-bundler-CZsfuo3g.js"),__vite__mapDeps([4,1,2])),y=document.createElement("div"),b=p("div",[p("span",l("confirm.removeText")),p("span",{class:"badge text-bg-light font-medium-2 fw-normal text-secondary"},o),p("span","?")]);g(b,y);const F=y.innerHTML;c.showConfirmationDialog({html:F},async()=>!0)}function a(){Object.assign(e,{dtData:[],spinner:!1,pager:{totals:0},params:{sort:["sort","asc"],searches:{}}})}return{table:e,remove:t,reset:a}}),_e={__name:"DtHeader",setup(l){const e=N(),{searchSubmit:t,dtReset:a}=new q(e);return(r,o)=>(f(),R(he,{onSearchSubmit:n(t),onDtReset:n(a)},{search:h(()=>[u(n(D),{name:"keyword",rules:"required"},{default:h(({field:i,errors:m})=>[s("input",E({type:"search",class:["form-control",{"is-invalid":!!m.length}],placeholder:"搜尋..."},i),null,16)]),_:1})]),_:1},8,["onSearchSubmit","onDtReset"]))}},ve={__name:"Dt",setup(l){const{width:e,height:t}=le(),a=w(null);return(r,o)=>{const i=M("vxe-table");return f(),R(i,{ref_key:"xTable",ref:a,"max-height":n(e)>768?n(t)-390:null,"auto-resize":""},{empty:h(()=>o[0]||(o[0]=[s("span",null,[s("p",null,"沒有資料")],-1)])),default:h(()=>[T(r.$slots,"default")]),_:3},8,["max-height"])}}},ye={class:"d-flex align-items-center flex-wrap gap-2"},$e=["data-id","textContent"],Se=["onClick","textContent"],we=["textContent"],xe={class:"bi bi-person"},Ce={class:"bi bi-phone"},ke={class:"bi bi-envelope"},Te={key:0},De={__name:"DtTable",setup(l){const e=N(),{sortChange:t,filterChange:a,remove:r}=new q(e),o=w(null),i=P(()=>e.table.spinner),m=P(()=>e.table.dtData);return Q(()=>{e.table.ref=o.value.$refs.xTable}),(c,p)=>{const g=M("vxe-column"),y=ve;return f(),R(y,{ref_key:"DtRef",ref:o,loading:n(i),data:n(m),"checkbox-config":{labelField:"select"},onHeaderCellClick:n(t),onFilterChange:n(a)},{default:h(()=>[u(g,{"min-width":"200",width:"200",field:"action",title:"操作"},{default:h(({row:b})=>[s("div",ye,[s("button",{type:"button",class:"btn btn-outline-info bi bi-pencil-square","data-id":b.id,"data-type":"edit","data-bs-toggle":"modal","data-bs-target":"#create-edit-modal",textContent:_(c.$t("actions.editText"))},null,8,$e),s("button",{type:"button",class:"btn btn-outline-danger bi bi-trash",onClick:F=>n(r)(b.id,b.number),textContent:_(c.$t("actions.removeText"))},null,8,Se)])]),_:1}),u(g,{"min-width":"200",width:"200",field:"number",align:"center",title:"訂單編號"},{default:h(({row:b})=>[b.number?(f(),v("div",{key:0,class:"badge bg-light text-secondary fw-medium",textContent:_(b.number)},null,8,we)):O("",!0)]),_:1}),u(g,{"min-width":"230",field:"buyer",title:"訂購人資訊"},{default:h(({row:b})=>[s("p",xe,_(b.buyer.name),1),s("p",Ce,_(b.buyer.tel),1),s("p",ke,_(b.buyer.email),1)]),_:1}),u(g,{"min-width":"180",field:"duration",align:"center",title:"入住 / 退房日期"},{default:h(({row:b})=>[s("p",null,_(b.start_date),1),s("p",null,_(b.end_date),1)]),_:1}),u(g,{"min-width":"160",field:"price",title:"訂單金額"},{default:h(({row:b})=>[s("span",null,"$ "+_(b.price),1),b.memo?(f(),v("span",Te," ("+_(b.memo)+")",1)):O("",!0)]),_:1})]),_:1},8,["loading","data","onHeaderCellClick","onFilterChange"])}}},Oe=B(De,[["__scopeId","data-v-c093918d"]]),Re={__name:"DtFooter",setup(l){const e=N(),{pageChange:t,pageParams:a}=new q(e);a();const{table:r}=ae(e);return(o,i)=>{const m=M("vxe-pager");return f(),R(m,{"current-page":n(r).params.p,"onUpdate:currentPage":i[0]||(i[0]=c=>n(r).params.p=c),"page-size":n(r).params.length,"onUpdate:pageSize":i[1]||(i[1]=c=>n(r).params.length=c),total:n(r).pager.totals,onPageChange:n(t)},null,8,["current-page","page-size","total","onPageChange"])}}},Fe={class:"overlay bg-light bg-opacity-75"},Ee={__name:"Overlay",props:{loadingText:String,textClass:String,spinnerClass:String},setup(l){return(e,t)=>(f(),v("div",Fe,[s("div",{class:k(["spinner-border text-primary",l.spinnerClass]),role:"status"},t[0]||(t[0]=[s("span",{class:"visually-hidden"},"Loading...",-1)]),2),l.loadingText?(f(),v("div",{key:0,class:k(["spinner-text",l.textClass])},_(l.loadingText),3)):O("",!0),T(e.$slots,"content",{},void 0,!0)]))}},Pe=B(Ee,[["__scopeId","data-v-9e5d8801"]]),je=["id"],He={class:"modal-content"},Le={class:"modal-title"},Me={key:0},Ve={key:0,type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},ze={class:"modal-subheader"},Ie={class:"mx-auto"},Be=["disabled","form"],qe={class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Ne=["textContent"],Ae={__name:"Modal",props:{config:Object,isLoading:Boolean,spinner:Boolean},emits:["onShow","onShown","onHide","onHidden"],setup(l,{expose:e,emit:t}){const a=l,r=oe(),o=X("bootstrap"),i=w(null),m=w(!1),c=w(null),p=w(!1),g=P(()=>a.config?.formId??"create-edit-form"),y=P(()=>({show:a.config?.showClose??!0})),b=P(()=>{const d=r.footer;return d===void 0?!1:d().length>0}),F=()=>{m.value=!1,p.value=!0},V=()=>{m.value=!0,p.value=!1},$=t;return e({modal:i}),Q(()=>{const d={backdrop:a.config.backdrop??!0,keyboard:!1};i.value=new o.Modal(`#${a.config.id}`,d),H(i.value._element,"show.bs.modal",x=>$("onShow",x)),H(i.value._element,"shown.bs.modal",x=>$("onShown",x)),H(i.value._element,"hide.bs.modal",x=>$("onHide",x)),H(i.value._element,"hidden.bs.modal",x=>$("onHidden",x))}),(d,x)=>{const S=M("vscrollbar"),C=Pe;return f(),v("div",{id:l.config.id,class:k(["modal fade",l.config.class]),tabindex:"-1","aria-hidden":"true"},[s("div",{class:k(["modal-dialog",l.config.dialogClass])},[s("div",He,[s("div",{class:k(["modal-header",{shadow:n(m)}])},[s("h4",Le,[I(_(l.config.title)+" ",1),l.config.subtitle?(f(),v("small",Me,_(l.config.subtitle),1)):O("",!0)]),T(d.$slots,"header",{},void 0,!0),n(y).show?(f(),v("button",Ve)):O("",!0)],2),s("div",ze,[T(d.$slots,"subheader",{},void 0,!0)]),l.config.scrollbar?(f(),R(S,{key:0,ref_key:"ScrollRef",ref:c,class:k(["modal-body py-0",l.config.bodyClass]),onPsYReachStart:F,onPsScrollDown:V},{default:h(()=>[T(d.$slots,"content",{},void 0,!0)]),_:3},8,["class"])):(f(),v("div",{key:1,class:k(["modal-body py-0",l.config.bodyClass])},[T(d.$slots,"content",{},void 0,!0)],2)),d.$slots.footer?(f(),v("div",{key:2,class:k({"modal-footer":n(b),"ps-shadow":n(p)})},[T(d.$slots,"footer",{},void 0,!0)],2)):(f(),v("div",{key:3,class:k(["modal-footer",{"ps-shadow":n(p)}])},[s("div",Ie,[s("button",{type:"submit",class:"btn btn-primary btn-lg mx-1",disabled:l.spinner,form:n(g)},[L(s("span",qe,null,512),[[W,l.spinner]]),I(" "+_(l.spinner?d.$t("actions.savingText"):l.config.subtitle),1)],8,Be),s("button",{type:"button",class:"btn btn-outline-secondary btn-lg mx-1","data-bs-dismiss":"modal","aria-label":"Close",textContent:_(d.$tc("actions.closeText",2))},null,8,Ne)])],2)),L(u(C,null,null,512),[[W,l.isLoading]])])],2)],10,je)}}},Ue=B(Ae,[["__scopeId","data-v-0d628f21"]]),Y=l=>{const{$t:e}=Z(),t=l.type==="create",a=l.type==="edit",r=l.id,o=l?.name;let i="",m="";return t?(i=e("actions.createText"),m="create"):a&&(i=e("actions.saveText"),m="edit"),{isCreate:t,isEdit:a,modalSubtitle:i,actionType:m,id:r,name:o}};function G(l){const e=ne(l);function t(a){e.value=a}return[e,t]}const We={class:"card card-form mb-0"},Ye={class:"card-body"},Ge={class:"mb-4"},Je={class:"mb-4"},Ke=["disabled"],Qe={class:"mb-4"},Xe=["disabled"],Ze={class:"mb-4"},et=["disabled"],tt={class:"mb-4"},st={class:"input-group"},at=["disabled"],ot={class:"mb-4"},nt={__name:"CreateEditModal",setup(l){const e=K(),[t,a]=G(!1),[r,o]=G(!1),i=X("navigation"),m=w(null),c=w(null),p=w(i[e.name]().title),g=w("");async function y($){const{modalSubtitle:d}=Y($.relatedTarget.dataset);g.value=d,a(!0)}async function b($){Y($.relatedTarget.dataset),a(!1)}function F(){m.value.resetForm()}function V($){console.log($)}return($,d)=>{const x=Ue;return f(),R(x,{ref_key:"createEditModal",ref:c,isLoading:n(t),spinner:n(r),config:{id:"create-edit-modal",title:n(p),subtitle:n(g),dialogClass:"modal-dialog-scrollable"},onOnShow:y,onOnShown:b,onOnHidden:F},{content:h(()=>[u(n(J),{id:"create-edit-form",ref_key:"editForm",ref:m,onSubmit:V},{default:h(()=>[u(n(D),{type:"hidden",name:"id"}),s("div",We,[s("div",Ye,[s("div",Ge,[d[0]||(d[0]=s("label",{class:"form-label"},"訂單編號",-1)),u(n(D),{type:"text",name:"number",label:"訂單編號",class:"form-control",disabled:n(r)},null,8,["disabled"])]),s("div",Je,[d[1]||(d[1]=s("label",{class:"form-label"},"訂購人姓名",-1)),u(n(D),{name:"name",label:"訂購人姓名",rules:"required"},{default:h(({field:S,errors:C})=>[s("input",E({type:"text",class:["form-control",{"is-invalid":!!C.length}],disabled:n(r)},S),null,16,Ke)]),_:1}),u(n(j),{name:"name",class:"invalid-feedback"})]),s("div",Qe,[d[2]||(d[2]=s("label",{class:"form-label"},"訂購人電話",-1)),u(n(D),{name:"tel",label:"訂購人電話",rules:"required|numeric"},{default:h(({field:S,errors:C})=>[s("input",E({type:"text",class:["form-control",{"is-invalid":!!C.length}],disabled:n(r)},S),null,16,Xe)]),_:1}),u(n(j),{name:"tel",class:"invalid-feedback"})]),s("div",Ze,[d[3]||(d[3]=s("label",{class:"form-label"},"訂購人Email",-1)),u(n(D),{name:"email",label:"訂購人Email",rules:"required|email"},{default:h(({field:S,errors:C})=>[s("input",E({type:"text",class:["form-control",{"is-invalid":!!C.length}],disabled:n(r)},S),null,16,et)]),_:1}),u(n(j),{name:"email",class:"invalid-feedback"})]),s("div",tt,[d[5]||(d[5]=s("label",{class:"form-label"},"訂單金額",-1)),u(n(D),{name:"price",label:"訂單金額",rules:"required|numeric"},{default:h(({field:S,errors:C})=>[s("div",st,[d[4]||(d[4]=s("span",{class:"input-group-text"},"$",-1)),s("input",E({type:"text",class:["form-control",{"is-invalid":!!C.length}],disabled:n(r)},S),null,16,at)])]),_:1}),u(n(j),{name:"price",class:"invalid-feedback"})]),s("div",ot,[u(n(D),{type:"checkbox",name:"has_breakfast",value:!0,"unchecked-value":!1},{default:h(({field:S})=>[s("label",null,[s("input",E({type:"checkbox",name:"has_breakfast"},S,{value:!0,class:"form-check-input me-2"}),null,16),d[6]||(d[6]=I(" 含早餐 "))])]),_:1})])])])]),_:1},512)]),_:1},8,["isLoading","spinner","config"])}}},rt={class:"content-body"},lt={class:"card border-0 mb-0"},it={class:"card-header pb-3"},ct={class:"card-body pb-0"},dt={class:"card-footer text-body-secondary py-3"},ut={__name:"OrderView",setup(l){return(e,t)=>(f(),v("div",rt,[s("div",lt,[s("div",it,[u(_e)]),s("div",ct,[u(Oe)]),s("div",dt,[u(Re)])]),(f(),R(re,{to:"#app"},[u(nt)]))]))}},ft=Object.freeze(Object.defineProperty({__proto__:null,default:ut},Symbol.toStringTag,{value:"Module"}));export{ft as O,Z as u};
