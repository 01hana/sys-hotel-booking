const __vite__fileDeps=["assets/index-B4K5E_35.js","assets/index-B_YitWuW.js","assets/index-Ufe54TO0.css","assets/index-BeI1uFyr.js","assets/vue.runtime.esm-bundler-CbQgd2ZI.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{g as w,h as L,m as te,o as f,d as v,i as n,e as s,t as _,p as T,j as O,a as m,w as h,q as j,s as Q,V as U,u as X,v as z,x as se,y as ae,z as W,c as R,A as D,B as F,C as B,r as M,D as oe,E as Y,_ as q,G as ne,n as k,H as re,I as Z,k as I,J as G,K as le,L as P,N as ie,O as ce}from"./index-B_YitWuW.js";import{u as de,a as H}from"./index-BeI1uFyr.js";const ue={class:"row justify-content-between flex-column flex-xl-row g-0 gap-2 w-100"},me={key:0,class:"col-auto heading-elements me-auto hstack"},be={class:"d-flex align-items-center flex-wrap gap-1"},fe=["data-bs-target","textContent"],pe={key:0,class:"vr mx-1 my-2 d-none d-sm-block"},he={key:1,class:"col-12 col-md-auto ms-auto"},ge={class:"input-group"},_e={type:"submit",class:"input-group-text btn btn-light bi bi-search",form:"search-form"},ve={__name:"DtHeader",props:{actions:Object},emits:["searchSubmit"],setup(l,{emit:e}){const t=l,o=w(null),r=L(()=>({show:t.actions?.create?.show??!0,bsTarget:t.actions?.create?.bsTarget??"#create-edit-modal"})),a=e,i=c=>a("searchSubmit",c),u=c=>a("dtReset",c);return(c,p)=>{const g=te("tooltip");return f(),v("div",ue,[n(r).show?(f(),v("div",me,[s("div",be,[s("button",{type:"button",class:"btn btn-primary btn-lg","data-type":"create","data-bs-toggle":"modal","data-bs-target":n(r).bsTarget,textContent:_(c.$t("actions.createText"))},null,8,fe),T(c.$slots,"actions"),c.$slots.actions?(f(),v("div",pe)):O("",!0)])])):O("",!0),c.$slots.search?(f(),v("div",he,[m(n(Q),{ref_key:"searchForm",ref:o,id:"search-form",class:"position-relative",onSubmit:i},{default:h(()=>[s("div",ge,[T(c.$slots,"search"),j(s("button",_e,null,512),[[g,c.$t("actions.searchText"),void 0,{bottom:!0}]]),j(s("button",{type:"reset",class:"input-group-text btn btn-light bi bi-arrow-clockwise",form:"search-form","data-bs-toggle":"tooltip",onClick:p[0]||(p[0]=y=>u(n(o)))},null,512),[[g,c.$tc("actions.resetText",0),void 0,{bottom:!0}]])])]),_:3},512)])):O("",!0)])}}};class N{static stores;constructor(e){this.stores=e}$resetSelect=()=>{const{table:e}=this.stores;e.select.count=0,e.ref.clearCheckboxRow()};$resetSearch=()=>{const{table:e}=this.stores;Object.hasOwn(e.params,"searches")&&(e.params.searches={})};$resetFilters=()=>{const{table:e}=this.stores;if(!Object.hasOwn(e.params,"filters"))return;e.ref.getCheckedFilters().forEach(o=>e.ref.clearFilter(o.field)),e.params.filters={}};dtClear=()=>{const{table:e}=this.stores;e.ref.clearAll()};$setSort=()=>{const{table:e}=this.stores;let t=e.params.sort[0],o=e.params.sort[1];if(e.ref.getSortColumns().length>0){const{field:r,order:a}=e.ref.getSortColumns()[0];e.ref.sort(r,a);return}Object.hasOwn(e.params,"defaultSort")&&(t=e.params.defaultSort[0],o=e.params.defaultSort[1]),e.ref.sort(t,o)};setTable(e){if(!e)return;const{table:t}=this.stores;t.dtData=e.data,t.params.p=e.p,t.pager.totals=e.totals,this.$setSort()}selectVisible=e=>{const{table:t}=this.stores,o=t.ref.getColumnByField("select");e.value?(t.ref.hideColumn(o),this.$resetSelect()):t.ref.showColumn(o),e.value=!e.value};searchSubmit=e=>{const{table:t,getTable:o}=this.stores;this.$resetSearch(),t.params.p=1,t.params.searches.keyword=e.keyword};dtReset=e=>{const{table:t,getTable:o}=this.stores;this.$resetSearch(),this.$resetFilters(),e.resetForm(),t.params.p=1};sortChange=({column:e,triggerResizable:t,triggerSort:o,triggerFilter:r})=>{if(!e.sortable||t||o||r)return;const{table:a,getTable:i}=this.stores;switch(a.params.sort.length>0&&!Object.hasOwn(a.params,"defaultSort")&&(a.params.defaultSort=[a.params.sort[0],a.params.sort[1]]),e.order){case"desc":e.field===a.params.defaultSort[0]?a.ref.sort(e.field,"asc"):a.ref.clearSort();break;case"asc":a.ref.sort(e.field,"desc");break;default:a.ref.sort(e.field,"asc")}const u=a.ref.getSortColumns().length>0;let c,p;if(!u&&Object.hasOwn(a.params,"defaultSort")&&(c=a.params.defaultSort[0],p=a.params.defaultSort[1]),u){const{field:g,order:y}=a.ref.getSortColumns()[0];c=g,p=y}a.params.sort=[c,p],i()};filterChange=e=>{const{table:t}=this.stores,{getTable:o}=this.stores,{field:r,values:a}=e;t.params.p=1,t.params.filters[r]=a,a.length<=0&&delete t.params.filters[r],o()};selectChange=e=>{const{table:t}=this.stores;t.select.count=e.records.length};pageParams=()=>{const{table:e}=this.stores;e.params.p=e.params.p||U.Pager.props.currentPage.default,e.params.length=e.params.length||U.Pager.props.pageSize.default()};pageChange=e=>{const{table:t}=this.stores,{getTable:o}=this.stores;t.params.p=e.currentPage,t.params.length=e.pageSize,o()};remove=(e,t)=>{const{remove:o}=this.stores;o({rows:[e],name:t,isMultiple:!1})};removeBatch=()=>{const{table:e}=this.stores,{remove:t}=this.stores;if(e.select.count<=0)return;const a={rows:e.ref.getCheckboxRecords().map(i=>i.id),isMultiple:!0};t(a)};actionBatch=(e,t)=>{const{table:o}=this.stores,{actions:r}=this.stores;if(o.select.count<=0)return;const i=o.ref.getCheckboxRecords().map(c=>c.id);r({type:e,value:t,rows:i})}}const ye=[{id:"b4df1a3f-366c-4812-8e5a-86307dc4285a",number:"A00020240810",buyer:{name:"王曉明",tel:"0912345678",email:"wang@gmail.com"},start_date:"2024/08/10",end_date:"2024/08/12",price:2500,memo:null},{id:"d2b96240-a596-47e8-815c-cd7afa197e74",number:"B00020240815",buyer:{name:"林大花",tel:"0900123456",email:"lin123@gmail.com"},start_date:"2024/08/15",end_date:"2024/08/16",price:3900,memo:"含早餐"}];function ee(){const l=X();function e(r,a){return z.global.t(r,a)}function t(r,a){return z.global.tc(r,a)}function o(r,a){const{name:i}=l;return z.global.t(`views.${i}.${r}`,a)}return{$t:e,$tv:o,$tc:t}}const A=se("order",()=>{const{$t:l}=ee(),e=ae({dtData:ye,spinner:!1,pager:{totals:2},params:{sort:["sort","asc"],searches:{}}});async function t({rows:r,name:a}){const{default:i,baseSwal:u}=await W(()=>import("./index-B4K5E_35.js"),__vite__mapDeps([0,1,2,3])),c=new i("DEL"),{h:p,render:g}=await W(()=>import("./vue.runtime.esm-bundler-CbQgd2ZI.js"),__vite__mapDeps([4,1,2])),y=document.createElement("div"),b=p("div",[p("span",l("confirm.removeText")),p("span",{class:"badge text-bg-light font-medium-2 fw-normal text-secondary"},a),p("span","?")]);g(b,y);const E=y.innerHTML;c.showConfirmationDialog({html:E},async()=>!0)}function o(){Object.assign(e,{dtData:[],spinner:!1,pager:{totals:0},params:{sort:["sort","asc"],searches:{}}})}return{table:e,remove:t,reset:o}}),$e={__name:"DtHeader",setup(l){const e=A(),{searchSubmit:t,dtReset:o}=new N(e);return(r,a)=>(f(),R(ve,{onSearchSubmit:n(t),onDtReset:n(o)},{search:h(()=>[m(n(D),{name:"keyword",rules:"required"},{default:h(({field:i,errors:u})=>[s("input",F({type:"search",class:["form-control",{"is-invalid":!!u.length}],placeholder:"搜尋..."},i),null,16)]),_:1})]),_:1},8,["onSearchSubmit","onDtReset"]))}},Se=["textContent"],we={__name:"Dt",setup(l){const{width:e,height:t}=de(),o=w(null),r=async a=>{const{default:i}=await oe(a);Y.setI18n(a,i),Y.setLanguage(a)};return B(()=>{r("zh-TW")}),(a,i)=>{const u=M("vxe-table");return f(),R(u,{ref_key:"xTable",ref:o,"max-height":n(e)>768?n(t)-325:null,"auto-resize":""},{empty:h(()=>[s("span",null,[s("p",{textContent:_(a.$t("table.empty"))},null,8,Se)])]),default:h(()=>[T(a.$slots,"default")]),_:3},8,["max-height"])}}},xe={class:"d-flex align-items-center flex-wrap gap-2"},Ce=["data-id","textContent"],ke=["onClick","textContent"],Te=["textContent"],De={class:"bi bi-person"},Oe={class:"bi bi-phone"},Re={class:"bi bi-envelope"},Ee={key:0},Fe={__name:"DtTable",setup(l){const e=A(),{sortChange:t,filterChange:o,remove:r}=new N(e),a=w(null),i=L(()=>e.table.spinner),u=L(()=>e.table.dtData);return B(()=>{e.table.ref=a.value.$refs.xTable}),(c,p)=>{const g=M("vxe-column"),y=we;return f(),R(y,{ref_key:"DtRef",ref:a,loading:n(i),data:n(u),"checkbox-config":{labelField:"select"},onHeaderCellClick:n(t),onFilterChange:n(o)},{default:h(()=>[m(g,{"min-width":"200",width:"200",field:"action",title:"操作"},{default:h(({row:b})=>[s("div",xe,[s("button",{type:"button",class:"btn btn-outline-info bi bi-pencil-square","data-id":b.id,"data-type":"edit","data-bs-toggle":"modal","data-bs-target":"#create-edit-modal",textContent:_(c.$t("actions.editText"))},null,8,Ce),s("button",{type:"button",class:"btn btn-outline-danger bi bi-trash",onClick:E=>n(r)(b.id,b.number),textContent:_(c.$t("actions.removeText"))},null,8,ke)])]),_:1}),m(g,{"min-width":"200",width:"200",field:"number",align:"center",title:"訂單編號"},{default:h(({row:b})=>[b.number?(f(),v("div",{key:0,class:"badge bg-light text-secondary fw-medium",textContent:_(b.number)},null,8,Te)):O("",!0)]),_:1}),m(g,{"min-width":"230",field:"buyer",title:"訂購人資訊"},{default:h(({row:b})=>[s("p",De,_(b.buyer.name),1),s("p",Oe,_(b.buyer.tel),1),s("p",Re,_(b.buyer.email),1)]),_:1}),m(g,{"min-width":"180",field:"duration",align:"center",title:"入住 / 退房日期"},{default:h(({row:b})=>[s("p",null,_(b.start_date),1),s("p",null,_(b.end_date),1)]),_:1}),m(g,{"min-width":"160",field:"price",title:"訂單金額"},{default:h(({row:b})=>[s("span",null,"$ "+_(b.price),1),b.memo?(f(),v("span",Ee," ("+_(b.memo)+")",1)):O("",!0)]),_:1})]),_:1},8,["loading","data","onHeaderCellClick","onFilterChange"])}}},Le=q(Fe,[["__scopeId","data-v-c093918d"]]),Pe={__name:"DtFooter",setup(l){const e=A(),{pageChange:t,pageParams:o}=new N(e);o();const{table:r}=ne(e);return(a,i)=>{const u=M("vxe-pager");return f(),R(u,{"current-page":n(r).params.p,"onUpdate:currentPage":i[0]||(i[0]=c=>n(r).params.p=c),"page-size":n(r).params.length,"onUpdate:pageSize":i[1]||(i[1]=c=>n(r).params.length=c),total:n(r).pager.totals,onPageChange:n(t)},null,8,["current-page","page-size","total","onPageChange"])}}},He={class:"overlay bg-light bg-opacity-75"},je={__name:"Overlay",props:{loadingText:String,textClass:String,spinnerClass:String},setup(l){return(e,t)=>(f(),v("div",He,[s("div",{class:k(["spinner-border text-primary",l.spinnerClass]),role:"status"},t[0]||(t[0]=[s("span",{class:"visually-hidden"},"Loading...",-1)]),2),l.loadingText?(f(),v("div",{key:0,class:k(["spinner-text",l.textClass])},_(l.loadingText),3)):O("",!0),T(e.$slots,"content",{},void 0,!0)]))}},Me=q(je,[["__scopeId","data-v-9e5d8801"]]),Ve=["id"],ze={class:"modal-content"},Ie={class:"modal-title"},Be={key:0},qe={key:0,type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},Ne={class:"modal-subheader"},Ae={class:"mx-auto"},Ue=["disabled","form"],We={class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Ye=["textContent"],Ge={__name:"Modal",props:{config:Object,isLoading:Boolean,spinner:Boolean},emits:["onShow","onShown","onHide","onHidden"],setup(l,{expose:e,emit:t}){const o=l,r=re(),a=Z("bootstrap"),i=w(null),u=w(!1),c=w(null),p=w(!1),g=L(()=>o.config?.formId??"create-edit-form"),y=L(()=>({show:o.config?.showClose??!0})),b=L(()=>{const d=r.footer;return d===void 0?!1:d().length>0}),E=()=>{u.value=!1,p.value=!0},V=()=>{u.value=!0,p.value=!1},$=t;return e({modal:i}),B(()=>{const d={backdrop:o.config.backdrop??!0,keyboard:!1};i.value=new a.Modal(`#${o.config.id}`,d),H(i.value._element,"show.bs.modal",x=>$("onShow",x)),H(i.value._element,"shown.bs.modal",x=>$("onShown",x)),H(i.value._element,"hide.bs.modal",x=>$("onHide",x)),H(i.value._element,"hidden.bs.modal",x=>$("onHidden",x))}),(d,x)=>{const S=M("vscrollbar"),C=Me;return f(),v("div",{id:l.config.id,class:k(["modal fade",l.config.class]),tabindex:"-1","aria-hidden":"true"},[s("div",{class:k(["modal-dialog",l.config.dialogClass])},[s("div",ze,[s("div",{class:k(["modal-header",{shadow:n(u)}])},[s("h4",Ie,[I(_(l.config.title)+" ",1),l.config.subtitle?(f(),v("small",Be,_(l.config.subtitle),1)):O("",!0)]),T(d.$slots,"header",{},void 0,!0),n(y).show?(f(),v("button",qe)):O("",!0)],2),s("div",Ne,[T(d.$slots,"subheader",{},void 0,!0)]),l.config.scrollbar?(f(),R(S,{key:0,ref_key:"ScrollRef",ref:c,class:k(["modal-body py-0",l.config.bodyClass]),onPsYReachStart:E,onPsScrollDown:V},{default:h(()=>[T(d.$slots,"content",{},void 0,!0)]),_:3},8,["class"])):(f(),v("div",{key:1,class:k(["modal-body py-0",l.config.bodyClass])},[T(d.$slots,"content",{},void 0,!0)],2)),d.$slots.footer?(f(),v("div",{key:2,class:k({"modal-footer":n(b),"ps-shadow":n(p)})},[T(d.$slots,"footer",{},void 0,!0)],2)):(f(),v("div",{key:3,class:k(["modal-footer",{"ps-shadow":n(p)}])},[s("div",Ae,[s("button",{type:"submit",class:"btn btn-primary btn-lg mx-1",disabled:l.spinner,form:n(g)},[j(s("span",We,null,512),[[G,l.spinner]]),I(" "+_(l.spinner?d.$t("actions.savingText"):l.config.subtitle),1)],8,Ue),s("button",{type:"button",class:"btn btn-outline-secondary btn-lg mx-1","data-bs-dismiss":"modal","aria-label":"Close",textContent:_(d.$tc("actions.closeText",2))},null,8,Ye)])],2)),j(m(C,null,null,512),[[G,l.isLoading]])])],2)],10,Ve)}}},Je=q(Ge,[["__scopeId","data-v-0d628f21"]]),J=l=>{const{$t:e}=ee(),t=l.type==="create",o=l.type==="edit",r=l.id,a=l?.name;let i="",u="";return t?(i=e("actions.createText"),u="create"):o&&(i=e("actions.saveText"),u="edit"),{isCreate:t,isEdit:o,modalSubtitle:i,actionType:u,id:r,name:a}};function K(l){const e=le(l);function t(o){e.value=o}return[e,t]}const Ke={class:"card card-form mb-0"},Qe={class:"card-body"},Xe={class:"mb-4"},Ze={class:"mb-4"},et=["disabled"],tt={class:"mb-4"},st=["disabled"],at={class:"mb-4"},ot=["disabled"],nt={class:"mb-4"},rt={class:"input-group"},lt=["disabled"],it={class:"mb-4"},ct={__name:"CreateEditModal",setup(l){const e=X(),[t,o]=K(!1),[r,a]=K(!1),i=Z("navigation"),u=w(null),c=w(null),p=w(i[e.name]().title),g=w("");async function y($){const{modalSubtitle:d}=J($.relatedTarget.dataset);g.value=d,o(!0)}async function b($){J($.relatedTarget.dataset),o(!1)}function E(){u.value.resetForm()}function V($){console.log($)}return($,d)=>{const x=Je;return f(),R(x,{ref_key:"createEditModal",ref:c,isLoading:n(t),spinner:n(r),config:{id:"create-edit-modal",title:n(p),subtitle:n(g),dialogClass:"modal-dialog-scrollable"},onOnShow:y,onOnShown:b,onOnHidden:E},{content:h(()=>[m(n(Q),{id:"create-edit-form",ref_key:"editForm",ref:u,onSubmit:V},{default:h(()=>[m(n(D),{type:"hidden",name:"id"}),s("div",Ke,[s("div",Qe,[s("div",Xe,[d[0]||(d[0]=s("label",{class:"form-label"},"訂單編號",-1)),m(n(D),{type:"text",name:"number",label:"訂單編號",class:"form-control",disabled:n(r)},null,8,["disabled"])]),s("div",Ze,[d[1]||(d[1]=s("label",{class:"form-label"},"訂購人姓名",-1)),m(n(D),{name:"name",label:"訂購人姓名",rules:"required"},{default:h(({field:S,errors:C})=>[s("input",F({type:"text",class:["form-control",{"is-invalid":!!C.length}],disabled:n(r)},S),null,16,et)]),_:1}),m(n(P),{name:"name",class:"invalid-feedback"})]),s("div",tt,[d[2]||(d[2]=s("label",{class:"form-label"},"訂購人電話",-1)),m(n(D),{name:"tel",label:"訂購人電話",rules:"required|numeric"},{default:h(({field:S,errors:C})=>[s("input",F({type:"text",class:["form-control",{"is-invalid":!!C.length}],disabled:n(r)},S),null,16,st)]),_:1}),m(n(P),{name:"tel",class:"invalid-feedback"})]),s("div",at,[d[3]||(d[3]=s("label",{class:"form-label"},"訂購人Email",-1)),m(n(D),{name:"email",label:"訂購人Email",rules:"required|email"},{default:h(({field:S,errors:C})=>[s("input",F({type:"text",class:["form-control",{"is-invalid":!!C.length}],disabled:n(r)},S),null,16,ot)]),_:1}),m(n(P),{name:"email",class:"invalid-feedback"})]),s("div",nt,[d[5]||(d[5]=s("label",{class:"form-label"},"訂單金額",-1)),m(n(D),{name:"price",label:"訂單金額",rules:"required|numeric"},{default:h(({field:S,errors:C})=>[s("div",rt,[d[4]||(d[4]=s("span",{class:"input-group-text"},"$",-1)),s("input",F({type:"text",class:["form-control",{"is-invalid":!!C.length}],disabled:n(r)},S),null,16,lt)])]),_:1}),m(n(P),{name:"price",class:"invalid-feedback"})]),s("div",it,[m(n(D),{type:"checkbox",name:"has_breakfast",value:!0,"unchecked-value":!1},{default:h(({field:S})=>[s("label",null,[s("input",F({type:"checkbox",name:"has_breakfast"},S,{value:!0,class:"form-check-input me-2"}),null,16),d[6]||(d[6]=I(" 含早餐 "))])]),_:1})])])])]),_:1},512)]),_:1},8,["isLoading","spinner","config"])}}},dt={class:"content-body"},ut={class:"card border-0 mb-0"},mt={class:"card-header pb-3"},bt={class:"card-body pb-0"},ft={class:"card-footer text-body-secondary py-3"},pt={__name:"OrderView",setup(l){return ie({title:"訂單管理"}),(e,t)=>(f(),v("div",dt,[s("div",ut,[s("div",mt,[m($e)]),s("div",bt,[m(Le)]),s("div",ft,[m(Pe)])]),(f(),R(ce,{to:"#app"},[m(ct)]))]))}},_t=Object.freeze(Object.defineProperty({__proto__:null,default:pt},Symbol.toStringTag,{value:"Module"}));export{_t as O,ee as u};
